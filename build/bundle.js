var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t){e.appendChild(t)}function i(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function s(e){return document.createElement(e)}function c(e){return document.createTextNode(e)}function p(){return c(" ")}function f(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function h(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function d(e){return""===e?null:+e}function _(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function m(e,t){e.value=null==t?"":t}let v;function g(e){v=e}const $=[],b=[],y=[],x=[],k=Promise.resolve();let N=!1;function w(e){y.push(e)}let H=!1;const C=new Set;function O(){if(!H){H=!0;do{for(let e=0;e<$.length;e+=1){const t=$[e];g(t),Y(t.$$)}for(g(null),$.length=0;b.length;)b.pop()();for(let e=0;e<y.length;e+=1){const t=y[e];C.has(t)||(C.add(t),t())}y.length=0}while($.length);for(;x.length;)x.pop()();N=!1,H=!1,C.clear()}}function Y(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(w)}}const E=new Set;let A;function M(e,t){e&&e.i&&(E.delete(e),e.i(t))}function j(e,t,n,r){if(e&&e.o){if(E.has(e))return;E.add(e),A.c.push((()=>{E.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function L(e,n,a){const{fragment:l,on_mount:i,on_destroy:u,after_update:s}=e.$$;l&&l.m(n,a),w((()=>{const n=i.map(t).filter(o);u?u.push(...n):r(n),e.$$.on_mount=[]})),s.forEach(w)}function P(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function D(e,t){-1===e.$$.dirty[0]&&($.push(e),N||(N=!0,k.then(O)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function S(t,o,a,l,i,s,c=[-1]){const p=v;g(t);const f=t.$$={fragment:null,ctx:null,props:s,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let h=!1;if(f.ctx=a?a(t,o.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&i(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),h&&D(t,e)),n})):[],f.update(),h=!0,r(f.before_update),f.fragment=!!l&&l(f.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);f.fragment&&f.fragment.l(e),e.forEach(u)}else f.fragment&&f.fragment.c();o.intro&&M(t.$$.fragment),L(t,o.target,o.anchor),O()}g(p)}class T{$destroy(){P(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function B(e){let t,n,o,a,l,c,d,_,m,v,g;return{c(){t=s("label"),t.textContent="Did any of these partners had Herpes?",n=p(),o=s("label"),o.textContent="Yes",a=p(),l=s("input"),c=p(),d=s("label"),d.textContent="No",_=p(),m=s("input"),h(t,"for","partnerHerps"),h(o,"for","yes"),h(l,"type","radio"),h(l,"id","partnerHerpYes"),h(l,"name","partnerHerp"),l.__value="1",l.value=l.__value,e[4][0].push(l),h(d,"for","no"),h(m,"type","radio"),h(m,"id","partnerHerpNo"),h(m,"name","partnerHerp"),m.__value="0",m.value=m.__value,e[4][0].push(m)},m(r,u){i(r,t,u),i(r,n,u),i(r,o,u),i(r,a,u),i(r,l,u),l.checked=l.__value===e[0].partnerHerp,i(r,c,u),i(r,d,u),i(r,_,u),i(r,m,u),m.checked=m.__value===e[0].partnerHerp,v||(g=[f(l,"change",e[3]),f(m,"change",e[5])],v=!0)},p(e,t){1&t&&(l.checked=l.__value===e[0].partnerHerp),1&t&&(m.checked=m.__value===e[0].partnerHerp)},d(i){i&&u(t),i&&u(n),i&&u(o),i&&u(a),i&&u(l),e[4][0].splice(e[4][0].indexOf(l),1),i&&u(c),i&&u(d),i&&u(_),i&&u(m),e[4][0].splice(e[4][0].indexOf(m),1),v=!1,r(g)}}}function I(e){let t,n,o,a,l,c,d,_,m,v,g;return{c(){t=s("label"),t.textContent="Are they having a flare up?",n=p(),o=s("label"),o.textContent="Yes",a=p(),l=s("input"),c=p(),d=s("label"),d.textContent="No",_=p(),m=s("input"),h(t,"for","herps"),h(o,"for","yes"),h(l,"type","radio"),h(l,"id","flareupYes"),h(l,"name","flareup"),l.__value="1",l.value=l.__value,e[4][2].push(l),h(d,"for","no"),h(m,"type","radio"),h(m,"id","flareupNo"),h(m,"name","flareup"),m.__value="0",m.value=m.__value,e[4][2].push(m)},m(r,u){i(r,t,u),i(r,n,u),i(r,o,u),i(r,a,u),i(r,l,u),l.checked=l.__value===e[0].flareup,i(r,c,u),i(r,d,u),i(r,_,u),i(r,m,u),m.checked=m.__value===e[0].flareup,v||(g=[f(l,"change",e[8]),f(m,"change",e[9])],v=!0)},p(e,t){1&t&&(l.checked=l.__value===e[0].flareup),1&t&&(m.checked=m.__value===e[0].flareup)},d(i){i&&u(t),i&&u(n),i&&u(o),i&&u(a),i&&u(l),e[4][2].splice(e[4][2].indexOf(l),1),i&&u(c),i&&u(d),i&&u(_),i&&u(m),e[4][2].splice(e[4][2].indexOf(m),1),v=!1,r(g)}}}function q(t){let n,o,a,v,g,$,b,y,x,k,N,w,H,C,O,Y,E,A,M,j,L,P,D,S,T,q,J,U,V,z,F,G,K,Q,R,W=t[0].alias+"",X=t[0].partnersNum>0&&B(t),Z=1==t[0].herps&&I(t);return{c(){n=s("form"),o=s("label"),o.textContent="alias:",a=p(),v=s("input"),g=p(),$=s("label"),$.textContent="How many sexual partners have they had since last testing negative?",b=p(),y=s("input"),x=p(),X&&X.c(),k=p(),N=s("label"),w=c("Do you already know "),H=c(W),C=c(" has Herps (that's for life)?"),O=p(),Y=s("label"),Y.textContent="Yes",E=p(),A=s("input"),M=p(),j=s("label"),j.textContent="No",L=p(),P=s("input"),D=p(),Z&&Z.c(),S=p(),T=s("label"),T.textContent="Are you going to use protection?",q=p(),J=s("label"),J.textContent="Yes",U=p(),V=s("input"),z=p(),F=s("label"),F.textContent="No",G=p(),K=s("input"),h(o,"for","alias"),h(v,"type","text"),h(v,"id","alias"),h(v,"name","alias"),h($,"for","partners"),h(y,"type","number"),h(y,"id","partners"),h(y,"name","partners"),h(N,"for","herps"),h(Y,"for","yes"),h(A,"type","radio"),h(A,"id","herpsYes"),h(A,"name","herps"),A.__value="1",A.value=A.__value,t[4][1].push(A),h(j,"for","no"),h(P,"type","radio"),h(P,"id","herpsNo"),h(P,"name","herps"),P.__value="0",P.value=P.__value,t[4][1].push(P),h(T,"for","protection"),h(J,"for","yes"),h(V,"type","radio"),h(V,"id","protectionYes"),h(V,"name","protection"),V.__value="1",V.value=V.__value,t[4][3].push(V),h(F,"for","no"),h(K,"type","radio"),h(K,"id","protectinNo"),h(K,"name","protection"),K.__value="0",K.value=K.__value,t[4][3].push(K)},m(e,r){i(e,n,r),l(n,o),l(n,a),l(n,v),m(v,t[0].alias),l(n,g),l(n,$),l(n,b),l(n,y),m(y,t[0].partnersNum),l(n,x),X&&X.m(n,null),l(n,k),l(n,N),l(N,w),l(N,H),l(N,C),l(n,O),l(n,Y),l(n,E),l(n,A),A.checked=A.__value===t[0].herps,l(n,M),l(n,j),l(n,L),l(n,P),P.checked=P.__value===t[0].herps,l(n,D),Z&&Z.m(n,null),l(n,S),l(n,T),l(n,q),l(n,J),l(n,U),l(n,V),V.checked=V.__value===t[0].protection,l(n,z),l(n,F),l(n,G),l(n,K),K.checked=K.__value===t[0].protection,Q||(R=[f(v,"input",t[1]),f(y,"input",t[2]),f(A,"change",t[6]),f(P,"change",t[7]),f(V,"change",t[10]),f(K,"change",t[11])],Q=!0)},p(e,[t]){1&t&&v.value!==e[0].alias&&m(v,e[0].alias),1&t&&d(y.value)!==e[0].partnersNum&&m(y,e[0].partnersNum),e[0].partnersNum>0?X?X.p(e,t):(X=B(e),X.c(),X.m(n,k)):X&&(X.d(1),X=null),1&t&&W!==(W=e[0].alias+"")&&_(H,W),1&t&&(A.checked=A.__value===e[0].herps),1&t&&(P.checked=P.__value===e[0].herps),1==e[0].herps?Z?Z.p(e,t):(Z=I(e),Z.c(),Z.m(n,S)):Z&&(Z.d(1),Z=null),1&t&&(V.checked=V.__value===e[0].protection),1&t&&(K.checked=K.__value===e[0].protection)},i:e,o:e,d(e){e&&u(n),X&&X.d(),t[4][1].splice(t[4][1].indexOf(A),1),t[4][1].splice(t[4][1].indexOf(P),1),Z&&Z.d(),t[4][3].splice(t[4][3].indexOf(V),1),t[4][3].splice(t[4][3].indexOf(K),1),Q=!1,r(R)}}}function J(e,t,n){let{profile:r={alias:"",partnersNum:0,partnerHerp:0,herps:5,flareup:0,tested:0,protection:1}}=t;return e.$$set=e=>{"profile"in e&&n(0,r=e.profile)},e.$$.update=()=>{1&e.$$.dirty&&0==r.herps&&n(0,r.flareup=0,r)},[r,function(){r.alias=this.value,n(0,r)},function(){r.partnersNum=d(this.value),n(0,r)},function(){r.partnerHerp=this.__value,n(0,r)},[[],[],[],[]],function(){r.partnerHerp=this.__value,n(0,r)},function(){r.herps=this.__value,n(0,r)},function(){r.herps=this.__value,n(0,r)},function(){r.flareup=this.__value,n(0,r)},function(){r.flareup=this.__value,n(0,r)},function(){r.protection=this.__value,n(0,r)},function(){r.protection=this.__value,n(0,r)}]}class U extends T{constructor(e){super(),S(this,e,J,q,a,{profile:0})}}function V(e,t,n){const r=e.slice();return r[9]=t[n].alias,r[10]=t[n].partnersNum,r[11]=t[n].partnerHerp,r[12]=t[n].herps,r[13]=t[n].flareup,r[14]=t[n].protection,r[15]=t,r[16]=n,r}function z(e){let t,n,r,o,a,p=e[3][e[16]].alias+"";function h(){return e[7](e[16])}return{c(){var e,o,a;t=s("button"),n=c("I've decided not to have sex with "),r=c(p),e="background-color",o="pink",t.style.setProperty(e,o,a?"important":"")},m(e,u){i(e,t,u),l(t,n),l(t,r),o||(a=f(t,"click",h),o=!0)},p(t,n){e=t,8&n&&p!==(p=e[3][e[16]].alias+"")&&_(r,p)},d(e){e&&u(t),o=!1,a()}}}function F(e){let t,n,r,o,a,c,f=e[3].length>1&&z(e);function d(t){e[8].call(null,t,e[16])}let _={};return void 0!==e[3][e[16]]&&(_.profile=e[3][e[16]]),r=new U({props:_}),b.push((()=>function(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}(r,"profile",d))),{c(){var e;t=s("div"),f&&f.c(),n=p(),(e=r.$$.fragment)&&e.c(),a=p(),h(t,"class","grid-item svelte-1dk7loc")},m(e,o){i(e,t,o),f&&f.m(t,null),l(t,n),L(r,t,null),l(t,a),c=!0},p(a,l){(e=a)[3].length>1?f?f.p(e,l):(f=z(e),f.c(),f.m(t,n)):f&&(f.d(1),f=null);const i={};var u;!o&&8&l&&(o=!0,i.profile=e[3][e[16]],u=()=>o=!1,x.push(u)),r.$set(i)},i(e){c||(M(r.$$.fragment,e),c=!0)},o(e){j(r.$$.fragment,e),c=!1},d(e){e&&u(t),f&&f.d(),P(r)}}}function G(e){let t,n,o,a,d,m,v,g,$,b,y,x,k,N,w,H,C,O,Y,E,L,P,D,S,T,B,I=e[3],q=[];for(let t=0;t<I.length;t+=1)q[t]=F(V(e,I,t));const J=e=>j(q[e],1,1,(()=>{q[e]=null}));return{c(){t=s("div");for(let e=0;e<q.length;e+=1)q[e].c();n=p(),o=s("br"),a=s("br"),d=s("br"),m=p(),v=s("button"),g=c("Actually, I'm having a "),$=c(e[0]),b=c("-some"),y=p(),x=s("br"),k=s("br"),N=p(),w=s("button"),w.textContent="Calculate event microHerps",H=p(),C=s("p"),O=c("You are facing "),Y=c(e[1]),E=c(" microHerps"),L=c(e[2]),P=p(),D=s("p"),D.innerHTML="Data that went into this:\n\t<br/>\n\t80% of herpes shedding episodes are asymphtomatic. https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4006256/\n\t<br/>\n\t12% of the U.S. population has HPV-2 (genital herpes) https://www.livescience.com/61681-herpes-infections-united-states.html\n\t<br/>\n\tLess than 10 percent of all those who were seropositive reported a history of genital herpes https://www.nejm.org/doi/full/10.1056/NEJM199710163371601 (not sure how accurate this info still is).\n\t<br/>\n\tproper condom use prevents infection in 96% of infected-male/herpes-free-female and 65% of infected-female/herpes-free-male sexual encounters https://stdcenterny.com/articles/protected-herpes-transmission.html#condom\n\t<br/>",h(t,"class","grid-container svelte-1dk7loc")},m(r,u){i(r,t,u);for(let e=0;e<q.length;e+=1)q[e].m(t,null);i(r,n,u),i(r,o,u),i(r,a,u),i(r,d,u),i(r,m,u),i(r,v,u),l(v,g),l(v,$),l(v,b),i(r,y,u),i(r,x,u),i(r,k,u),i(r,N,u),i(r,w,u),i(r,H,u),i(r,C,u),l(C,O),l(C,Y),l(C,E),l(C,L),i(r,P,u),i(r,D,u),S=!0,T||(B=[f(v,"click",e[4]),f(w,"click",e[6])],T=!0)},p(e,[n]){if(40&n){let o;for(I=e[3],o=0;o<I.length;o+=1){const r=V(e,I,o);q[o]?(q[o].p(r,n),M(q[o],1)):(q[o]=F(r),q[o].c(),M(q[o],1),q[o].m(t,null))}for(A={r:0,c:[],p:A},o=I.length;o<q.length;o+=1)J(o);A.r||r(A.c),A=A.p}(!S||1&n)&&_($,e[0]),(!S||2&n)&&_(Y,e[1]),(!S||4&n)&&_(L,e[2])},i(e){if(!S){for(let e=0;e<I.length;e+=1)M(q[e]);S=!0}},o(e){q=q.filter(Boolean);for(let e=0;e<q.length;e+=1)j(q[e]);S=!1},d(e){e&&u(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(q,e),e&&u(n),e&&u(o),e&&u(a),e&&u(d),e&&u(m),e&&u(v),e&&u(y),e&&u(x),e&&u(k),e&&u(N),e&&u(w),e&&u(H),e&&u(C),e&&u(P),e&&u(D),T=!1,r(B)}}}function K(e,t,n){let r,o=3,a="!",l=[{alias:"sexytime partner#1",partnersNum:0,partnerHerp:0,herps:5,flareup:0,protection:0}];function i(e){l.splice(e,1),n(3,l),n(0,o=l.length+2)}return[o,r,a,l,function(){console.log("tried to add a person"),l.push({alias:"",partnersNum:0,herps:5,flareup:0,tested:0,protection:1}),n(3,l[l.length-1].alias="sexytimepartner#"+l.length,l),n(3,l),n(0,o=l.length+2)},i,function(){for(var e=[],t=0;t<l.length;){var o=0;1==l[t].herps&&(o=.3),1==l[t].flareup&&(o=1),o>=.3?(console.log("had risk because of herps"),1==l[t].protection?e.push(1-.15*o):e.push(1-.8*o),t+=1):(console.log("got past herpes"),l[t].partnersNum>0&&(console.log("calculating risk"),o+=.05*l[t].partnersNum,console.log("risk from partners ="+o)),1==l[t].partnerHerp&&(o*=2),o>1&&(o=1),1==l[t].protection?e.push(1-.15*o*.3):e.push(1-.8*o*.3),t+=1)}console.log("calculating"),n(1,r=Math.round(1e6*(1-e.reduce(((e,t)=>e*t))))),r<1e5?n(2,a="."):(n(2,a="!"),n(2,a=a.repeat(Math.round(r/1e5))))},e=>i(e),function(e,t){l[t]=e,n(3,l)}]}return new class extends T{constructor(e){super(),S(this,e,K,G,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
